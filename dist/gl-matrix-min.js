/*!
@fileoverview gl-matrix - High performance matrix and vector operations
@author Brandon Jones
@author Colin MacKenzie IV
@version 3.4.4

Copyright (c) 2015-2026, Brandon Jones, Colin MacKenzie IV.

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
THE SOFTWARE.

*/
!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n((t="undefined"!=typeof globalThis?globalThis:t||self).glMatrix={})}(this,(function(t){"use strict";function n(t,n,r){return n=e(n),function(t,n){if(n&&("object"==typeof n||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,a()?Reflect.construct(n,r||[],e(t).constructor):n.apply(t,r))}function r(t,n){for(var r=0;r<n.length;r++){var e=n[r];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,o(e.key),e)}}function e(t){return e=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},e(t)}function a(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(a=function(){return!!t})()}function u(t,n){return u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,n){return t.__proto__=n,t},u(t,n)}function o(t){var n=function(t,n){if("object"!=typeof t||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var e=r.call(t,n||"default");if("object"!=typeof e)return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(t)}(t,"string");return"symbol"==typeof n?n:n+""}var i=1e-6,c="undefined"!=typeof Float32Array?Float32Array:Array,f=c===Array?m(c):c,s=Math.random;function h(t){return Math.round(Math.abs(t))*Math.sign(t)}var l=Math.PI/180,M=180/Math.PI;function v(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i;return Math.abs(t-n)<=r*Math.max(1,Math.abs(t),Math.abs(n))}function m(t){return function(t){function e(){var t;!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e);for(var r=arguments.length,a=new Array(r),u=0;u<r;u++)a[u]=arguments[u];return(t=n(this,e,[].concat(a))).fill(0),t}return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),n&&u(t,n)}(e,t),a=e,o&&r(a.prototype,o),i&&r(a,i),Object.defineProperty(a,"prototype",{writable:!1}),a;var a,o,i}(t)}var d=Object.freeze({__proto__:null,EPSILON:i,get ARRAY_TYPE(){return c},get ARRAY_ZERO_INIT_TYPE(){return f},RANDOM:s,ANGLE_ORDER:"zyx",round:h,setMatrixArrayType:function(t){c=t,f=Array.isArray(t)?m(t):t},toRadian:function(t){return t*l},toDegree:function(t){return t*M},equals:v});function p(t,n,r){var e=n[0],a=n[1],u=n[2],o=n[3],i=r[0],c=r[1],f=r[2],s=r[3];return t[0]=e*i+u*c,t[1]=a*i+o*c,t[2]=e*f+u*s,t[3]=a*f+o*s,t}function b(t,n,r){return t[0]=n[0]-r[0],t[1]=n[1]-r[1],t[2]=n[2]-r[2],t[3]=n[3]-r[3],t}var y=p,g=b,q=Object.freeze({__proto__:null,create:function(){var t=new f(4);return t[0]=1,t[3]=1,t},clone:function(t){var n=new c(4);return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n},copy:function(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t},identity:function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},fromValues:function(t,n,r,e){var a=new c(4);return a[0]=t,a[1]=n,a[2]=r,a[3]=e,a},set:function(t,n,r,e,a){return t[0]=n,t[1]=r,t[2]=e,t[3]=a,t},transpose:function(t,n){t[0]=n[0];var r=n[1];return t[1]=n[2],t[2]=r,t[3]=n[3],t},invert:function(t,n){var r=n[0],e=n[1],a=n[2],u=n[3],o=r*u-a*e;return o?(o=1/o,t[0]=u*o,t[1]=-e*o,t[2]=-a*o,t[3]=r*o,t):null},adjoint:function(t,n){var r=n[0];return t[0]=n[3],t[1]=-n[1],t[2]=-n[2],t[3]=r,t},determinant:function(t){return t[0]*t[3]-t[2]*t[1]},multiply:p,rotate:function(t,n,r){var e=n[0],a=n[1],u=n[2],o=n[3],i=Math.sin(r),c=Math.cos(r);return t[0]=e*c+u*i,t[1]=a*c+o*i,t[2]=e*-i+u*c,t[3]=a*-i+o*c,t},scale:function(t,n,r){var e=r[0],a=r[1];return t[0]=n[0]*e,t[1]=n[1]*e,t[2]=n[2]*a,t[3]=n[3]*a,t},fromRotation:function(t,n){var r=Math.sin(n),e=Math.cos(n);return t[0]=e,t[1]=r,t[2]=-r,t[3]=e,t},fromScaling:function(t,n){return t[0]=n[0],t[1]=0,t[2]=0,t[3]=n[1],t},str:function(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},frob:function(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]+t[3]*t[3])},LDU:function(t,n,r,e){return t[2]=e[2]/e[0],r[0]=e[0],r[1]=e[1],r[3]=e[3]-t[2]*r[1],[t,n,r]},add:function(t,n,r){return t[0]=n[0]+r[0],t[1]=n[1]+r[1],t[2]=n[2]+r[2],t[3]=n[3]+r[3],t},subtract:b,exactEquals:function(t,n){return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]&&t[3]===n[3]},equals:function(t,n){return v(t[0],n[0])&&v(t[1],n[1])&&v(t[2],n[2])&&v(t[3],n[3])},multiplyScalar:function(t,n,r){return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=n[3]*r,t},multiplyScalarAndAdd:function(t,n,r,e){return t[0]=n[0]+r[0]*e,t[1]=n[1]+r[1]*e,t[2]=n[2]+r[2]*e,t[3]=n[3]+r[3]*e,t},mul:y,sub:g});function w(t,n,r){var e=n[0],a=n[1],u=n[2],o=n[3],i=n[4],c=n[5],f=r[0],s=r[1],h=r[2],l=r[3],M=r[4],v=r[5];return t[0]=e*f+u*s,t[1]=a*f+o*s,t[2]=e*h+u*l,t[3]=a*h+o*l,t[4]=e*M+u*v+i,t[5]=a*M+o*v+c,t}function x(t,n,r){return t[0]=n[0]-r[0],t[1]=n[1]-r[1],t[2]=n[2]-r[2],t[3]=n[3]-r[3],t[4]=n[4]-r[4],t[5]=n[5]-r[5],t}var _=w,A=x,O=Object.freeze({__proto__:null,create:function(){var t=new f(6);return t[0]=1,t[3]=1,t},clone:function(t){var n=new c(6);return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4],n[5]=t[5],n},copy:function(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t},identity:function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},fromValues:function(t,n,r,e,a,u){var o=new c(6);return o[0]=t,o[1]=n,o[2]=r,o[3]=e,o[4]=a,o[5]=u,o},set:function(t,n,r,e,a,u,o){return t[0]=n,t[1]=r,t[2]=e,t[3]=a,t[4]=u,t[5]=o,t},invert:function(t,n){var r=n[0],e=n[1],a=n[2],u=n[3],o=n[4],i=n[5],c=r*u-e*a;return c?(c=1/c,t[0]=u*c,t[1]=-e*c,t[2]=-a*c,t[3]=r*c,t[4]=(a*i-u*o)*c,t[5]=(e*o-r*i)*c,t):null},determinant:function(t){return t[0]*t[3]-t[1]*t[2]},multiply:w,rotate:function(t,n,r){var e=n[0],a=n[1],u=n[2],o=n[3],i=Math.sin(r),c=Math.cos(r);return t[0]=e*c+u*i,t[1]=a*c+o*i,t[2]=e*-i+u*c,t[3]=a*-i+o*c,t[4]=n[4],t[5]=n[5],t},scale:function(t,n,r){var e=n[0],a=n[1],u=n[2],o=n[3],i=n[4],c=n[5],f=r[0],s=r[1];return t[0]=e*f,t[1]=a*f,t[2]=u*s,t[3]=o*s,t[4]=i,t[5]=c,t},translate:function(t,n,r){var e=n[0],a=n[1],u=n[2],o=n[3],i=n[4],c=n[5],f=r[0],s=r[1];return t[0]=e,t[1]=a,t[2]=u,t[3]=o,t[4]=e*f+u*s+i,t[5]=a*f+o*s+c,t},fromRotation:function(t,n){var r=Math.sin(n),e=Math.cos(n);return t[0]=e,t[1]=r,t[2]=-r,t[3]=e,t[4]=0,t[5]=0,t},fromScaling:function(t,n){return t[0]=n[0],t[1]=0,t[2]=0,t[3]=n[1],t[4]=0,t[5]=0,t},fromTranslation:function(t,n){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=n[0],t[5]=n[1],t},str:function(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"},frob:function(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]+t[3]*t[3]+t[4]*t[4]+t[5]*t[5]+1)},add:function(t,n,r){return t[0]=n[0]+r[0],t[1]=n[1]+r[1],t[2]=n[2]+r[2],t[3]=n[3]+r[3],t[4]=n[4]+r[4],t[5]=n[5]+r[5],t},subtract:x,multiplyScalar:function(t,n,r){return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=n[3]*r,t[4]=n[4]*r,t[5]=n[5]*r,t},multiplyScalarAndAdd:function(t,n,r,e){return t[0]=n[0]+r[0]*e,t[1]=n[1]+r[1]*e,t[2]=n[2]+r[2]*e,t[3]=n[3]+r[3]*e,t[4]=n[4]+r[4]*e,t[5]=n[5]+r[5]*e,t},exactEquals:function(t,n){return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]&&t[3]===n[3]&&t[4]===n[4]&&t[5]===n[5]},equals:function(t,n){return v(t[0],n[0])&&v(t[1],n[1])&&v(t[2],n[2])&&v(t[3],n[3])&&v(t[4],n[4])&&v(t[5],n[5])},mul:_,sub:A});function j(){var t=new f(9);return t[0]=1,t[4]=1,t[8]=1,t}function P(t,n,r){var e=n[0],a=n[1],u=n[2],o=n[3],i=n[4],c=n[5],f=n[6],s=n[7],h=n[8],l=r[0],M=r[1],v=r[2],m=r[3],d=r[4],p=r[5],b=r[6],y=r[7],g=r[8];return t[0]=l*e+M*o+v*f,t[1]=l*a+M*i+v*s,t[2]=l*u+M*c+v*h,t[3]=m*e+d*o+p*f,t[4]=m*a+d*i+p*s,t[5]=m*u+d*c+p*h,t[6]=b*e+y*o+g*f,t[7]=b*a+y*i+g*s,t[8]=b*u+y*c+g*h,t}function R(t,n,r){return t[0]=n[0]-r[0],t[1]=n[1]-r[1],t[2]=n[2]-r[2],t[3]=n[3]-r[3],t[4]=n[4]-r[4],t[5]=n[5]-r[5],t[6]=n[6]-r[6],t[7]=n[7]-r[7],t[8]=n[8]-r[8],t}var z=P,E=R,T=Object.freeze({__proto__:null,create:j,fromMat4:function(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[4],t[4]=n[5],t[5]=n[6],t[6]=n[8],t[7]=n[9],t[8]=n[10],t},clone:function(t){var n=new c(9);return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4],n[5]=t[5],n[6]=t[6],n[7]=t[7],n[8]=t[8],n},copy:function(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t},fromValues:function(t,n,r,e,a,u,o,i,f){var s=new c(9);return s[0]=t,s[1]=n,s[2]=r,s[3]=e,s[4]=a,s[5]=u,s[6]=o,s[7]=i,s[8]=f,s},set:function(t,n,r,e,a,u,o,i,c,f){return t[0]=n,t[1]=r,t[2]=e,t[3]=a,t[4]=u,t[5]=o,t[6]=i,t[7]=c,t[8]=f,t},identity:function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},transpose:function(t,n){var r=n[1],e=n[2],a=n[5];return t[0]=n[0],t[1]=n[3],t[2]=n[6],t[3]=r,t[4]=n[4],t[5]=n[7],t[6]=e,t[7]=a,t[8]=n[8],t},invert:function(t,n){var r=n[0],e=n[1],a=n[2],u=n[3],o=n[4],i=n[5],c=n[6],f=n[7],s=n[8],h=s*o-i*f,l=-s*u+i*c,M=f*u-o*c,v=r*h+e*l+a*M;return v?(v=1/v,t[0]=h*v,t[1]=(-s*e+a*f)*v,t[2]=(i*e-a*o)*v,t[3]=l*v,t[4]=(s*r-a*c)*v,t[5]=(-i*r+a*u)*v,t[6]=M*v,t[7]=(-f*r+e*c)*v,t[8]=(o*r-e*u)*v,t):null},adjoint:function(t,n){var r=n[0],e=n[1],a=n[2],u=n[3],o=n[4],i=n[5],c=n[6],f=n[7],s=n[8];return t[0]=o*s-i*f,t[1]=a*f-e*s,t[2]=e*i-a*o,t[3]=i*c-u*s,t[4]=r*s-a*c,t[5]=a*u-r*i,t[6]=u*f-o*c,t[7]=e*c-r*f,t[8]=r*o-e*u,t},determinant:function(t){var n=t[0],r=t[1],e=t[2],a=t[3],u=t[4],o=t[5],i=t[6],c=t[7],f=t[8];return n*(f*u-o*c)+r*(-f*a+o*i)+e*(c*a-u*i)},multiply:P,translate:function(t,n,r){var e=n[0],a=n[1],u=n[2],o=n[3],i=n[4],c=n[5],f=n[6],s=n[7],h=n[8],l=r[0],M=r[1];return t[0]=e,t[1]=a,t[2]=u,t[3]=o,t[4]=i,t[5]=c,t[6]=l*e+M*o+f,t[7]=l*a+M*i+s,t[8]=l*u+M*c+h,t},rotate:function(t,n,r){var e=n[0],a=n[1],u=n[2],o=n[3],i=n[4],c=n[5],f=n[6],s=n[7],h=n[8],l=Math.sin(r),M=Math.cos(r);return t[0]=M*e+l*o,t[1]=M*a+l*i,t[2]=M*u+l*c,t[3]=M*o-l*e,t[4]=M*i-l*a,t[5]=M*c-l*u,t[6]=f,t[7]=s,t[8]=h,t},scale:function(t,n,r){var e=r[0],a=r[1];return t[0]=e*n[0],t[1]=e*n[1],t[2]=e*n[2],t[3]=a*n[3],t[4]=a*n[4],t[5]=a*n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t},fromTranslation:function(t,n){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=n[0],t[7]=n[1],t[8]=1,t},fromRotation:function(t,n){var r=Math.sin(n),e=Math.cos(n);return t[0]=e,t[1]=r,t[2]=0,t[3]=-r,t[4]=e,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},fromScaling:function(t,n){return t[0]=n[0],t[1]=0,t[2]=0,t[3]=0,t[4]=n[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},fromMat2d:function(t,n){return t[0]=n[0],t[1]=n[1],t[2]=0,t[3]=n[2],t[4]=n[3],t[5]=0,t[6]=n[4],t[7]=n[5],t[8]=1,t},fromQuat:function(t,n){var r=n[0],e=n[1],a=n[2],u=n[3],o=r+r,i=e+e,c=a+a,f=r*o,s=e*o,h=e*i,l=a*o,M=a*i,v=a*c,m=u*o,d=u*i,p=u*c;return t[0]=1-h-v,t[3]=s-p,t[6]=l+d,t[1]=s+p,t[4]=1-f-v,t[7]=M-m,t[2]=l-d,t[5]=M+m,t[8]=1-f-h,t},normalFromMat4:function(t,n){var r=n[0],e=n[1],a=n[2],u=n[3],o=n[4],i=n[5],c=n[6],f=n[7],s=n[8],h=n[9],l=n[10],M=n[11],v=n[12],m=n[13],d=n[14],p=n[15],b=r*i-e*o,y=r*c-a*o,g=r*f-u*o,q=e*c-a*i,w=e*f-u*i,x=a*f-u*c,_=s*m-h*v,A=s*d-l*v,O=s*p-M*v,j=h*d-l*m,P=h*p-M*m,R=l*p-M*d,z=b*R-y*P+g*j+q*O-w*A+x*_;return z?(z=1/z,t[0]=(i*R-c*P+f*j)*z,t[1]=(c*O-o*R-f*A)*z,t[2]=(o*P-i*O+f*_)*z,t[3]=(a*P-e*R-u*j)*z,t[4]=(r*R-a*O+u*A)*z,t[5]=(e*O-r*P-u*_)*z,t[6]=(m*x-d*w+p*q)*z,t[7]=(d*g-v*x-p*y)*z,t[8]=(v*w-m*g+p*b)*z,t):null},projection:function(t,n,r){return t[0]=2/n,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/r,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t},str:function(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"},frob:function(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]+t[3]*t[3]+t[4]*t[4]+t[5]*t[5]+t[6]*t[6]+t[7]*t[7]+t[8]*t[8])},add:function(t,n,r){return t[0]=n[0]+r[0],t[1]=n[1]+r[1],t[2]=n[2]+r[2],t[3]=n[3]+r[3],t[4]=n[4]+r[4],t[5]=n[5]+r[5],t[6]=n[6]+r[6],t[7]=n[7]+r[7],t[8]=n[8]+r[8],t},subtract:R,multiplyScalar:function(t,n,r){return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=n[3]*r,t[4]=n[4]*r,t[5]=n[5]*r,t[6]=n[6]*r,t[7]=n[7]*r,t[8]=n[8]*r,t},multiplyScalarAndAdd:function(t,n,r,e){return t[0]=n[0]+r[0]*e,t[1]=n[1]+r[1]*e,t[2]=n[2]+r[2]*e,t[3]=n[3]+r[3]*e,t[4]=n[4]+r[4]*e,t[5]=n[5]+r[5]*e,t[6]=n[6]+r[6]*e,t[7]=n[7]+r[7]*e,t[8]=n[8]+r[8]*e,t},exactEquals:function(t,n){return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]&&t[3]===n[3]&&t[4]===n[4]&&t[5]===n[5]&&t[6]===n[6]&&t[7]===n[7]&&t[8]===n[8]},equals:function(t,n){return v(t[0],n[0])&&v(t[1],n[1])&&v(t[2],n[2])&&v(t[3],n[3])&&v(t[4],n[4])&&v(t[5],n[5])&&v(t[6],n[6])&&v(t[7],n[7])&&v(t[8],n[8])},mul:z,sub:E});function S(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function D(t,n,r){var e=n[0],a=n[1],u=n[2],o=n[3],i=n[4],c=n[5],f=n[6],s=n[7],h=n[8],l=n[9],M=n[10],v=n[11],m=n[12],d=n[13],p=n[14],b=n[15],y=r[0],g=r[1],q=r[2],w=r[3];return t[0]=y*e+g*i+q*h+w*m,t[1]=y*a+g*c+q*l+w*d,t[2]=y*u+g*f+q*M+w*p,t[3]=y*o+g*s+q*v+w*b,y=r[4],g=r[5],q=r[6],w=r[7],t[4]=y*e+g*i+q*h+w*m,t[5]=y*a+g*c+q*l+w*d,t[6]=y*u+g*f+q*M+w*p,t[7]=y*o+g*s+q*v+w*b,y=r[8],g=r[9],q=r[10],w=r[11],t[8]=y*e+g*i+q*h+w*m,t[9]=y*a+g*c+q*l+w*d,t[10]=y*u+g*f+q*M+w*p,t[11]=y*o+g*s+q*v+w*b,y=r[12],g=r[13],q=r[14],w=r[15],t[12]=y*e+g*i+q*h+w*m,t[13]=y*a+g*c+q*l+w*d,t[14]=y*u+g*f+q*M+w*p,t[15]=y*o+g*s+q*v+w*b,t}function I(t,n,r){var e=n[0],a=n[1],u=n[2],o=n[3],i=e+e,c=a+a,f=u+u,s=e*i,h=e*c,l=e*f,M=a*c,v=a*f,m=u*f,d=o*i,p=o*c,b=o*f;return t[0]=1-(M+m),t[1]=h+b,t[2]=l-p,t[3]=0,t[4]=h-b,t[5]=1-(s+m),t[6]=v+d,t[7]=0,t[8]=l+p,t[9]=v-d,t[10]=1-(s+M),t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t}function L(t,n){return t[0]=n[12],t[1]=n[13],t[2]=n[14],t}function V(t,n){var r=n[0],e=n[1],a=n[2],u=n[4],o=n[5],i=n[6],c=n[8],f=n[9],s=n[10];return t[0]=Math.sqrt(r*r+e*e+a*a),t[1]=Math.sqrt(u*u+o*o+i*i),t[2]=Math.sqrt(c*c+f*f+s*s),t}function k(t,n){var r=new c(3);V(r,n);var e=1/r[0],a=1/r[1],u=1/r[2],o=n[0]*e,i=n[1]*a,f=n[2]*u,s=n[4]*e,h=n[5]*a,l=n[6]*u,M=n[8]*e,v=n[9]*a,m=n[10]*u,d=o+h+m,p=0;return d>0?(p=2*Math.sqrt(d+1),t[3]=.25*p,t[0]=(l-v)/p,t[1]=(M-f)/p,t[2]=(i-s)/p):o>h&&o>m?(p=2*Math.sqrt(1+o-h-m),t[3]=(l-v)/p,t[0]=.25*p,t[1]=(i+s)/p,t[2]=(M+f)/p):h>m?(p=2*Math.sqrt(1+h-o-m),t[3]=(M-f)/p,t[0]=(i+s)/p,t[1]=.25*p,t[2]=(l+v)/p):(p=2*Math.sqrt(1+m-o-h),t[3]=(i-s)/p,t[0]=(M+f)/p,t[1]=(l+v)/p,t[2]=.25*p),t}function Y(t,n,r,e,a){var u=1/Math.tan(n/2);if(t[0]=u/r,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=a&&a!==1/0){var o=1/(e-a);t[10]=(a+e)*o,t[14]=2*a*e*o}else t[10]=-1,t[14]=-2*e;return t}var Z=Y;function F(t,n,r,e,a,u,o){var i=1/(n-r),c=1/(e-a),f=1/(u-o);return t[0]=-2*i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*c,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*f,t[11]=0,t[12]=(n+r)*i,t[13]=(a+e)*c,t[14]=(o+u)*f,t[15]=1,t}var N=F;function Q(t,n,r){return t[0]=n[0]-r[0],t[1]=n[1]-r[1],t[2]=n[2]-r[2],t[3]=n[3]-r[3],t[4]=n[4]-r[4],t[5]=n[5]-r[5],t[6]=n[6]-r[6],t[7]=n[7]-r[7],t[8]=n[8]-r[8],t[9]=n[9]-r[9],t[10]=n[10]-r[10],t[11]=n[11]-r[11],t[12]=n[12]-r[12],t[13]=n[13]-r[13],t[14]=n[14]-r[14],t[15]=n[15]-r[15],t}var X=D,B=Q,U=Object.freeze({__proto__:null,create:function(){var t=new f(16);return t[0]=1,t[5]=1,t[10]=1,t[15]=1,t},clone:function(t){var n=new c(16);return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4],n[5]=t[5],n[6]=t[6],n[7]=t[7],n[8]=t[8],n[9]=t[9],n[10]=t[10],n[11]=t[11],n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15],n},copy:function(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],t},fromValues:function(t,n,r,e,a,u,o,i,f,s,h,l,M,v,m,d){var p=new c(16);return p[0]=t,p[1]=n,p[2]=r,p[3]=e,p[4]=a,p[5]=u,p[6]=o,p[7]=i,p[8]=f,p[9]=s,p[10]=h,p[11]=l,p[12]=M,p[13]=v,p[14]=m,p[15]=d,p},set:function(t,n,r,e,a,u,o,i,c,f,s,h,l,M,v,m,d){return t[0]=n,t[1]=r,t[2]=e,t[3]=a,t[4]=u,t[5]=o,t[6]=i,t[7]=c,t[8]=f,t[9]=s,t[10]=h,t[11]=l,t[12]=M,t[13]=v,t[14]=m,t[15]=d,t},identity:S,transpose:function(t,n){var r=n[1],e=n[2],a=n[3],u=n[6],o=n[7],i=n[11];return t[0]=n[0],t[1]=n[4],t[2]=n[8],t[3]=n[12],t[4]=r,t[5]=n[5],t[6]=n[9],t[7]=n[13],t[8]=e,t[9]=u,t[10]=n[10],t[11]=n[14],t[12]=a,t[13]=o,t[14]=i,t[15]=n[15],t},invert:function(t,n){var r=n[0],e=n[1],a=n[2],u=n[3],o=n[4],i=n[5],c=n[6],f=n[7],s=n[8],h=n[9],l=n[10],M=n[11],v=n[12],m=n[13],d=n[14],p=n[15],b=r*i-e*o,y=r*c-a*o,g=r*f-u*o,q=e*c-a*i,w=e*f-u*i,x=a*f-u*c,_=s*m-h*v,A=s*d-l*v,O=s*p-M*v,j=h*d-l*m,P=h*p-M*m,R=l*p-M*d,z=b*R-y*P+g*j+q*O-w*A+x*_;return z?(z=1/z,t[0]=(i*R-c*P+f*j)*z,t[1]=(a*P-e*R-u*j)*z,t[2]=(m*x-d*w+p*q)*z,t[3]=(l*w-h*x-M*q)*z,t[4]=(c*O-o*R-f*A)*z,t[5]=(r*R-a*O+u*A)*z,t[6]=(d*g-v*x-p*y)*z,t[7]=(s*x-l*g+M*y)*z,t[8]=(o*P-i*O+f*_)*z,t[9]=(e*O-r*P-u*_)*z,t[10]=(v*w-m*g+p*b)*z,t[11]=(h*g-s*w-M*b)*z,t[12]=(i*A-o*j-c*_)*z,t[13]=(r*j-e*A+a*_)*z,t[14]=(m*y-v*q-d*b)*z,t[15]=(s*q-h*y+l*b)*z,t):null},adjoint:function(t,n){var r=n[0],e=n[1],a=n[2],u=n[3],o=n[4],i=n[5],c=n[6],f=n[7],s=n[8],h=n[9],l=n[10],M=n[11],v=n[12],m=n[13],d=n[14],p=n[15],b=r*i-e*o,y=r*c-a*o,g=r*f-u*o,q=e*c-a*i,w=e*f-u*i,x=a*f-u*c,_=s*m-h*v,A=s*d-l*v,O=s*p-M*v,j=h*d-l*m,P=h*p-M*m,R=l*p-M*d;return t[0]=i*R-c*P+f*j,t[1]=a*P-e*R-u*j,t[2]=m*x-d*w+p*q,t[3]=l*w-h*x-M*q,t[4]=c*O-o*R-f*A,t[5]=r*R-a*O+u*A,t[6]=d*g-v*x-p*y,t[7]=s*x-l*g+M*y,t[8]=o*P-i*O+f*_,t[9]=e*O-r*P-u*_,t[10]=v*w-m*g+p*b,t[11]=h*g-s*w-M*b,t[12]=i*A-o*j-c*_,t[13]=r*j-e*A+a*_,t[14]=m*y-v*q-d*b,t[15]=s*q-h*y+l*b,t},determinant:function(t){var n=t[0],r=t[1],e=t[2],a=t[3],u=t[4],o=t[5],i=t[6],c=t[7],f=t[8],s=t[9],h=t[10],l=t[11],M=t[12],v=t[13],m=t[14],d=n*o-r*u,p=n*i-e*u,b=r*i-e*o,y=f*v-s*M,g=f*m-h*M,q=s*m-h*v;return c*(n*q-r*g+e*y)-a*(u*q-o*g+i*y)+t[15]*(f*b-s*p+h*d)-l*(M*b-v*p+m*d)},multiply:D,translate:function(t,n,r){var e,a,u,o,i,c,f,s,h,l,M,v,m=r[0],d=r[1],p=r[2];return n===t?(t[12]=n[0]*m+n[4]*d+n[8]*p+n[12],t[13]=n[1]*m+n[5]*d+n[9]*p+n[13],t[14]=n[2]*m+n[6]*d+n[10]*p+n[14],t[15]=n[3]*m+n[7]*d+n[11]*p+n[15]):(e=n[0],a=n[1],u=n[2],o=n[3],i=n[4],c=n[5],f=n[6],s=n[7],h=n[8],l=n[9],M=n[10],v=n[11],t[0]=e,t[1]=a,t[2]=u,t[3]=o,t[4]=i,t[5]=c,t[6]=f,t[7]=s,t[8]=h,t[9]=l,t[10]=M,t[11]=v,t[12]=e*m+i*d+h*p+n[12],t[13]=a*m+c*d+l*p+n[13],t[14]=u*m+f*d+M*p+n[14],t[15]=o*m+s*d+v*p+n[15]),t},scale:function(t,n,r){var e=r[0],a=r[1],u=r[2];return t[0]=n[0]*e,t[1]=n[1]*e,t[2]=n[2]*e,t[3]=n[3]*e,t[4]=n[4]*a,t[5]=n[5]*a,t[6]=n[6]*a,t[7]=n[7]*a,t[8]=n[8]*u,t[9]=n[9]*u,t[10]=n[10]*u,t[11]=n[11]*u,t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],t},rotate:function(t,n,r,e){var a,u,o,c,f,s,h,l,M,v,m,d,p,b,y,g,q,w,x,_,A,O,j,P,R=e[0],z=e[1],E=e[2],T=Math.sqrt(R*R+z*z+E*E);return T<i?null:(R*=T=1/T,z*=T,E*=T,a=Math.sin(r),o=1-(u=Math.cos(r)),c=n[0],f=n[1],s=n[2],h=n[3],l=n[4],M=n[5],v=n[6],m=n[7],d=n[8],p=n[9],b=n[10],y=n[11],g=R*R*o+u,q=z*R*o+E*a,w=E*R*o-z*a,x=R*z*o-E*a,_=z*z*o+u,A=E*z*o+R*a,O=R*E*o+z*a,j=z*E*o-R*a,P=E*E*o+u,t[0]=c*g+l*q+d*w,t[1]=f*g+M*q+p*w,t[2]=s*g+v*q+b*w,t[3]=h*g+m*q+y*w,t[4]=c*x+l*_+d*A,t[5]=f*x+M*_+p*A,t[6]=s*x+v*_+b*A,t[7]=h*x+m*_+y*A,t[8]=c*O+l*j+d*P,t[9]=f*O+M*j+p*P,t[10]=s*O+v*j+b*P,t[11]=h*O+m*j+y*P,n!==t&&(t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15]),t)},rotateX:function(t,n,r){var e=Math.sin(r),a=Math.cos(r),u=n[4],o=n[5],i=n[6],c=n[7],f=n[8],s=n[9],h=n[10],l=n[11];return n!==t&&(t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15]),t[4]=u*a+f*e,t[5]=o*a+s*e,t[6]=i*a+h*e,t[7]=c*a+l*e,t[8]=f*a-u*e,t[9]=s*a-o*e,t[10]=h*a-i*e,t[11]=l*a-c*e,t},rotateY:function(t,n,r){var e=Math.sin(r),a=Math.cos(r),u=n[0],o=n[1],i=n[2],c=n[3],f=n[8],s=n[9],h=n[10],l=n[11];return n!==t&&(t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15]),t[0]=u*a-f*e,t[1]=o*a-s*e,t[2]=i*a-h*e,t[3]=c*a-l*e,t[8]=u*e+f*a,t[9]=o*e+s*a,t[10]=i*e+h*a,t[11]=c*e+l*a,t},rotateZ:function(t,n,r){var e=Math.sin(r),a=Math.cos(r),u=n[0],o=n[1],i=n[2],c=n[3],f=n[4],s=n[5],h=n[6],l=n[7];return n!==t&&(t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15]),t[0]=u*a+f*e,t[1]=o*a+s*e,t[2]=i*a+h*e,t[3]=c*a+l*e,t[4]=f*a-u*e,t[5]=s*a-o*e,t[6]=h*a-i*e,t[7]=l*a-c*e,t},fromTranslation:function(t,n){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t},fromScaling:function(t,n){return t[0]=n[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=n[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=n[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},fromRotation:function(t,n,r){var e,a,u,o=r[0],c=r[1],f=r[2],s=Math.sqrt(o*o+c*c+f*f);return s<i?null:(o*=s=1/s,c*=s,f*=s,e=Math.sin(n),u=1-(a=Math.cos(n)),t[0]=o*o*u+a,t[1]=c*o*u+f*e,t[2]=f*o*u-c*e,t[3]=0,t[4]=o*c*u-f*e,t[5]=c*c*u+a,t[6]=f*c*u+o*e,t[7]=0,t[8]=o*f*u+c*e,t[9]=c*f*u-o*e,t[10]=f*f*u+a,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)},fromXRotation:function(t,n){var r=Math.sin(n),e=Math.cos(n);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e,t[6]=r,t[7]=0,t[8]=0,t[9]=-r,t[10]=e,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},fromYRotation:function(t,n){var r=Math.sin(n),e=Math.cos(n);return t[0]=e,t[1]=0,t[2]=-r,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=r,t[9]=0,t[10]=e,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},fromZRotation:function(t,n){var r=Math.sin(n),e=Math.cos(n);return t[0]=e,t[1]=r,t[2]=0,t[3]=0,t[4]=-r,t[5]=e,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},fromRotationTranslation:I,fromQuat2:function(t,n){var r=new c(3),e=-n[0],a=-n[1],u=-n[2],o=n[3],i=n[4],f=n[5],s=n[6],h=n[7],l=e*e+a*a+u*u+o*o;return l>0?(r[0]=2*(i*o+h*e+f*u-s*a)/l,r[1]=2*(f*o+h*a+s*e-i*u)/l,r[2]=2*(s*o+h*u+i*a-f*e)/l):(r[0]=2*(i*o+h*e+f*u-s*a),r[1]=2*(f*o+h*a+s*e-i*u),r[2]=2*(s*o+h*u+i*a-f*e)),I(t,n,r),t},getTranslation:L,getScaling:V,getRotation:k,decompose:function(t,n,r,e){n[0]=e[12],n[1]=e[13],n[2]=e[14];var a=e[0],u=e[1],o=e[2],i=e[4],c=e[5],f=e[6],s=e[8],h=e[9],l=e[10];r[0]=Math.sqrt(a*a+u*u+o*o),r[1]=Math.sqrt(i*i+c*c+f*f),r[2]=Math.sqrt(s*s+h*h+l*l);var M=1/r[0],v=1/r[1],m=1/r[2],d=a*M,p=u*v,b=o*m,y=i*M,g=c*v,q=f*m,w=s*M,x=h*v,_=l*m,A=d+g+_,O=0;return A>0?(O=2*Math.sqrt(A+1),t[3]=.25*O,t[0]=(q-x)/O,t[1]=(w-b)/O,t[2]=(p-y)/O):d>g&&d>_?(O=2*Math.sqrt(1+d-g-_),t[3]=(q-x)/O,t[0]=.25*O,t[1]=(p+y)/O,t[2]=(w+b)/O):g>_?(O=2*Math.sqrt(1+g-d-_),t[3]=(w-b)/O,t[0]=(p+y)/O,t[1]=.25*O,t[2]=(q+x)/O):(O=2*Math.sqrt(1+_-d-g),t[3]=(p-y)/O,t[0]=(w+b)/O,t[1]=(q+x)/O,t[2]=.25*O),t},fromRotationTranslationScale:function(t,n,r,e){var a=n[0],u=n[1],o=n[2],i=n[3],c=a+a,f=u+u,s=o+o,h=a*c,l=a*f,M=a*s,v=u*f,m=u*s,d=o*s,p=i*c,b=i*f,y=i*s,g=e[0],q=e[1],w=e[2];return t[0]=(1-(v+d))*g,t[1]=(l+y)*g,t[2]=(M-b)*g,t[3]=0,t[4]=(l-y)*q,t[5]=(1-(h+d))*q,t[6]=(m+p)*q,t[7]=0,t[8]=(M+b)*w,t[9]=(m-p)*w,t[10]=(1-(h+v))*w,t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t},fromRotationTranslationScaleOrigin:function(t,n,r,e,a){var u=n[0],o=n[1],i=n[2],c=n[3],f=u+u,s=o+o,h=i+i,l=u*f,M=u*s,v=u*h,m=o*s,d=o*h,p=i*h,b=c*f,y=c*s,g=c*h,q=e[0],w=e[1],x=e[2],_=a[0],A=a[1],O=a[2],j=(1-(m+p))*q,P=(M+g)*q,R=(v-y)*q,z=(M-g)*w,E=(1-(l+p))*w,T=(d+b)*w,S=(v+y)*x,D=(d-b)*x,I=(1-(l+m))*x;return t[0]=j,t[1]=P,t[2]=R,t[3]=0,t[4]=z,t[5]=E,t[6]=T,t[7]=0,t[8]=S,t[9]=D,t[10]=I,t[11]=0,t[12]=r[0]+_-(j*_+z*A+S*O),t[13]=r[1]+A-(P*_+E*A+D*O),t[14]=r[2]+O-(R*_+T*A+I*O),t[15]=1,t},fromQuat:function(t,n){var r=n[0],e=n[1],a=n[2],u=n[3],o=r+r,i=e+e,c=a+a,f=r*o,s=e*o,h=e*i,l=a*o,M=a*i,v=a*c,m=u*o,d=u*i,p=u*c;return t[0]=1-h-v,t[1]=s+p,t[2]=l-d,t[3]=0,t[4]=s-p,t[5]=1-f-v,t[6]=M+m,t[7]=0,t[8]=l+d,t[9]=M-m,t[10]=1-f-h,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},frustum:function(t,n,r,e,a,u,o){var i=1/(r-n),c=1/(a-e),f=1/(u-o);return t[0]=2*u*i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*u*c,t[6]=0,t[7]=0,t[8]=(r+n)*i,t[9]=(a+e)*c,t[10]=(o+u)*f,t[11]=-1,t[12]=0,t[13]=0,t[14]=o*u*2*f,t[15]=0,t},perspectiveNO:Y,perspective:Z,perspectiveZO:function(t,n,r,e,a){var u=1/Math.tan(n/2);if(t[0]=u/r,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=a&&a!==1/0){var o=1/(e-a);t[10]=a*o,t[14]=a*e*o}else t[10]=-1,t[14]=-e;return t},perspectiveFromFieldOfView:function(t,n,r,e){var a=Math.tan(n.upDegrees*Math.PI/180),u=Math.tan(n.downDegrees*Math.PI/180),o=Math.tan(n.leftDegrees*Math.PI/180),i=Math.tan(n.rightDegrees*Math.PI/180),c=2/(o+i),f=2/(a+u);return t[0]=c,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=f,t[6]=0,t[7]=0,t[8]=-(o-i)*c*.5,t[9]=(a-u)*f*.5,t[10]=e/(r-e),t[11]=-1,t[12]=0,t[13]=0,t[14]=e*r/(r-e),t[15]=0,t},orthoNO:F,ortho:N,orthoZO:function(t,n,r,e,a,u,o){var i=1/(n-r),c=1/(e-a),f=1/(u-o);return t[0]=-2*i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*c,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=f,t[11]=0,t[12]=(n+r)*i,t[13]=(a+e)*c,t[14]=u*f,t[15]=1,t},lookAt:function(t,n,r,e){var a,u,o,c,f,s,h,l,M,v,m=n[0],d=n[1],p=n[2],b=e[0],y=e[1],g=e[2],q=r[0],w=r[1],x=r[2];return Math.abs(m-q)<i&&Math.abs(d-w)<i&&Math.abs(p-x)<i?S(t):(h=m-q,l=d-w,M=p-x,a=y*(M*=v=1/Math.sqrt(h*h+l*l+M*M))-g*(l*=v),u=g*(h*=v)-b*M,o=b*l-y*h,(v=Math.sqrt(a*a+u*u+o*o))?(a*=v=1/v,u*=v,o*=v):(a=0,u=0,o=0),c=l*o-M*u,f=M*a-h*o,s=h*u-l*a,(v=Math.sqrt(c*c+f*f+s*s))?(c*=v=1/v,f*=v,s*=v):(c=0,f=0,s=0),t[0]=a,t[1]=c,t[2]=h,t[3]=0,t[4]=u,t[5]=f,t[6]=l,t[7]=0,t[8]=o,t[9]=s,t[10]=M,t[11]=0,t[12]=-(a*m+u*d+o*p),t[13]=-(c*m+f*d+s*p),t[14]=-(h*m+l*d+M*p),t[15]=1,t)},targetTo:function(t,n,r,e){var a=n[0],u=n[1],o=n[2],i=e[0],c=e[1],f=e[2],s=a-r[0],h=u-r[1],l=o-r[2],M=s*s+h*h+l*l;M>0&&(s*=M=1/Math.sqrt(M),h*=M,l*=M);var v=c*l-f*h,m=f*s-i*l,d=i*h-c*s;return(M=v*v+m*m+d*d)>0&&(v*=M=1/Math.sqrt(M),m*=M,d*=M),t[0]=v,t[1]=m,t[2]=d,t[3]=0,t[4]=h*d-l*m,t[5]=l*v-s*d,t[6]=s*m-h*v,t[7]=0,t[8]=s,t[9]=h,t[10]=l,t[11]=0,t[12]=a,t[13]=u,t[14]=o,t[15]=1,t},str:function(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"},frob:function(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]+t[3]*t[3]+t[4]*t[4]+t[5]*t[5]+t[6]*t[6]+t[7]*t[7]+t[8]*t[8]+t[9]*t[9]+t[10]*t[10]+t[11]*t[11]+t[12]*t[12]+t[13]*t[13]+t[14]*t[14]+t[15]*t[15])},add:function(t,n,r){return t[0]=n[0]+r[0],t[1]=n[1]+r[1],t[2]=n[2]+r[2],t[3]=n[3]+r[3],t[4]=n[4]+r[4],t[5]=n[5]+r[5],t[6]=n[6]+r[6],t[7]=n[7]+r[7],t[8]=n[8]+r[8],t[9]=n[9]+r[9],t[10]=n[10]+r[10],t[11]=n[11]+r[11],t[12]=n[12]+r[12],t[13]=n[13]+r[13],t[14]=n[14]+r[14],t[15]=n[15]+r[15],t},subtract:Q,multiplyScalar:function(t,n,r){return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=n[3]*r,t[4]=n[4]*r,t[5]=n[5]*r,t[6]=n[6]*r,t[7]=n[7]*r,t[8]=n[8]*r,t[9]=n[9]*r,t[10]=n[10]*r,t[11]=n[11]*r,t[12]=n[12]*r,t[13]=n[13]*r,t[14]=n[14]*r,t[15]=n[15]*r,t},multiplyScalarAndAdd:function(t,n,r,e){return t[0]=n[0]+r[0]*e,t[1]=n[1]+r[1]*e,t[2]=n[2]+r[2]*e,t[3]=n[3]+r[3]*e,t[4]=n[4]+r[4]*e,t[5]=n[5]+r[5]*e,t[6]=n[6]+r[6]*e,t[7]=n[7]+r[7]*e,t[8]=n[8]+r[8]*e,t[9]=n[9]+r[9]*e,t[10]=n[10]+r[10]*e,t[11]=n[11]+r[11]*e,t[12]=n[12]+r[12]*e,t[13]=n[13]+r[13]*e,t[14]=n[14]+r[14]*e,t[15]=n[15]+r[15]*e,t},exactEquals:function(t,n){return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]&&t[3]===n[3]&&t[4]===n[4]&&t[5]===n[5]&&t[6]===n[6]&&t[7]===n[7]&&t[8]===n[8]&&t[9]===n[9]&&t[10]===n[10]&&t[11]===n[11]&&t[12]===n[12]&&t[13]===n[13]&&t[14]===n[14]&&t[15]===n[15]},equals:function(t,n){return v(t[0],n[0])&&v(t[1],n[1])&&v(t[2],n[2])&&v(t[3],n[3])&&v(t[4],n[4])&&v(t[5],n[5])&&v(t[6],n[6])&&v(t[7],n[7])&&v(t[8],n[8])&&v(t[9],n[9])&&v(t[10],n[10])&&v(t[11],n[11])&&v(t[12],n[12])&&v(t[13],n[13])&&v(t[14],n[14])&&v(t[15],n[15])},mul:X,sub:B});function C(){return new f(3)}function G(t){return Math.hypot(t[0],t[1],t[2])}function W(t,n,r){var e=new c(3);return e[0]=t,e[1]=n,e[2]=r,e}function H(t,n,r){return t[0]=n[0]-r[0],t[1]=n[1]-r[1],t[2]=n[2]-r[2],t}function J(t,n,r){return t[0]=n[0]*r[0],t[1]=n[1]*r[1],t[2]=n[2]*r[2],t}function K(t,n,r){return t[0]=n[0]/r[0],t[1]=n[1]/r[1],t[2]=n[2]/r[2],t}function $(t,n){return Math.hypot(n[0]-t[0],n[1]-t[1],n[2]-t[2])}function tt(t,n){return Math.pow(Math.hypot(n[0]-t[0],n[1]-t[1],n[2]-t[2]),2)}function nt(t){return Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)}function rt(t,n){var r=Math.max(Math.hypot(n[0],n[1],n[2]),i);return t[0]=n[0]/r,t[1]=n[1]/r,t[2]=n[2]/r,t}function et(t,n){return t[0]*n[0]+t[1]*n[1]+t[2]*n[2]}function at(t,n,r){var e=n[0],a=n[1],u=n[2],o=r[0],i=r[1],c=r[2];return t[0]=a*c-u*i,t[1]=u*o-e*c,t[2]=e*i-a*o,t}var ut,ot=H,it=J,ct=K,ft=$,st=tt,ht=G,lt=nt,Mt=(ut=C(),function(t,n){var r,e,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,u=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0,i=arguments.length>5?arguments[5]:void 0;for(n=n||3,e=u?Math.min(u*n+a,t.length):t.length,r=a;r<e;r+=n)ut[0]=t[r],ut[1]=t[r+1],ut[2]=t[r+2],o(ut,ut,i),t[r]=ut[0],t[r+1]=ut[1],t[r+2]=ut[2];return t}),vt=Object.freeze({__proto__:null,create:C,clone:function(t){var n=new c(3);return n[0]=t[0],n[1]=t[1],n[2]=t[2],n},length:G,fromValues:W,copy:function(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t},set:function(t,n,r,e){return t[0]=n,t[1]=r,t[2]=e,t},add:function(t,n,r){return t[0]=n[0]+r[0],t[1]=n[1]+r[1],t[2]=n[2]+r[2],t},subtract:H,multiply:J,divide:K,ceil:function(t,n){return t[0]=Math.ceil(n[0]),t[1]=Math.ceil(n[1]),t[2]=Math.ceil(n[2]),t},floor:function(t,n){return t[0]=Math.floor(n[0]),t[1]=Math.floor(n[1]),t[2]=Math.floor(n[2]),t},min:function(t,n,r){return t[0]=Math.min(n[0],r[0]),t[1]=Math.min(n[1],r[1]),t[2]=Math.min(n[2],r[2]),t},max:function(t,n,r){return t[0]=Math.max(n[0],r[0]),t[1]=Math.max(n[1],r[1]),t[2]=Math.max(n[2],r[2]),t},round:function(t,n){return t[0]=h(n[0]),t[1]=h(n[1]),t[2]=h(n[2]),t},scale:function(t,n,r){return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t},scaleAndAdd:function(t,n,r,e){return t[0]=n[0]+r[0]*e,t[1]=n[1]+r[1]*e,t[2]=n[2]+r[2]*e,t},distance:$,squaredDistance:tt,squaredLength:nt,negate:function(t,n){return t[0]=-n[0],t[1]=-n[1],t[2]=-n[2],t},inverse:function(t,n){return t[0]=1/n[0],t[1]=1/n[1],t[2]=1/n[2],t},normalize:rt,dot:et,cross:at,lerp:function(t,n,r,e){var a=n[0],u=n[1],o=n[2];return t[0]=a+e*(r[0]-a),t[1]=u+e*(r[1]-u),t[2]=o+e*(r[2]-o),t},slerp:function(t,n,r,e){var a=Math.acos(Math.min(Math.max(et(n,r),-1),1)),u=Math.sin(a),o=Math.sin((1-e)*a)/u,i=Math.sin(e*a)/u;return t[0]=o*n[0]+i*r[0],t[1]=o*n[1]+i*r[1],t[2]=o*n[2]+i*r[2],t},hermite:function(t,n,r,e,a,u){var o=u*u,i=o*(2*u-3)+1,c=o*(u-2)+u,f=o*(u-1),s=o*(3-2*u);return t[0]=n[0]*i+r[0]*c+e[0]*f+a[0]*s,t[1]=n[1]*i+r[1]*c+e[1]*f+a[1]*s,t[2]=n[2]*i+r[2]*c+e[2]*f+a[2]*s,t},bezier:function(t,n,r,e,a,u){var o=1-u,i=o*o,c=u*u,f=i*o,s=3*u*i,h=3*c*o,l=c*u;return t[0]=n[0]*f+r[0]*s+e[0]*h+a[0]*l,t[1]=n[1]*f+r[1]*s+e[1]*h+a[1]*l,t[2]=n[2]*f+r[2]*s+e[2]*h+a[2]*l,t},random:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=2*s()*Math.PI,e=2*s()-1,a=Math.sqrt(1-e*e)*n;return t[0]=Math.cos(r)*a,t[1]=Math.sin(r)*a,t[2]=e*n,t},transformMat4:function(t,n,r){var e=n[0],a=n[1],u=n[2],o=r[3]*e+r[7]*a+r[11]*u+r[15];return o=o||1,t[0]=(r[0]*e+r[4]*a+r[8]*u+r[12])/o,t[1]=(r[1]*e+r[5]*a+r[9]*u+r[13])/o,t[2]=(r[2]*e+r[6]*a+r[10]*u+r[14])/o,t},transformMat3:function(t,n,r){var e=n[0],a=n[1],u=n[2];return t[0]=e*r[0]+a*r[3]+u*r[6],t[1]=e*r[1]+a*r[4]+u*r[7],t[2]=e*r[2]+a*r[5]+u*r[8],t},transformQuat:function(t,n,r){var e=r[0],a=r[1],u=r[2],o=r[3],i=n[0],c=n[1],f=n[2],s=a*f-u*c,h=u*i-e*f,l=e*c-a*i;return s+=s,h+=h,l+=l,t[0]=i+o*s+a*l-u*h,t[1]=c+o*h+u*s-e*l,t[2]=f+o*l+e*h-a*s,t},rotateX:function(t,n,r,e){var a=[],u=[];return a[0]=n[0]-r[0],a[1]=n[1]-r[1],a[2]=n[2]-r[2],u[0]=a[0],u[1]=a[1]*Math.cos(e)-a[2]*Math.sin(e),u[2]=a[1]*Math.sin(e)+a[2]*Math.cos(e),t[0]=u[0]+r[0],t[1]=u[1]+r[1],t[2]=u[2]+r[2],t},rotateY:function(t,n,r,e){var a=[],u=[];return a[0]=n[0]-r[0],a[1]=n[1]-r[1],a[2]=n[2]-r[2],u[0]=a[2]*Math.sin(e)+a[0]*Math.cos(e),u[1]=a[1],u[2]=a[2]*Math.cos(e)-a[0]*Math.sin(e),t[0]=u[0]+r[0],t[1]=u[1]+r[1],t[2]=u[2]+r[2],t},rotateZ:function(t,n,r,e){var a=[],u=[];return a[0]=n[0]-r[0],a[1]=n[1]-r[1],a[2]=n[2]-r[2],u[0]=a[0]*Math.cos(e)-a[1]*Math.sin(e),u[1]=a[0]*Math.sin(e)+a[1]*Math.cos(e),u[2]=a[2],t[0]=u[0]+r[0],t[1]=u[1]+r[1],t[2]=u[2]+r[2],t},angle:function(t,n){var r=t[0],e=t[1],a=t[2],u=n[0],o=n[1],i=n[2],c=Math.sqrt((r*r+e*e+a*a)*(u*u+o*o+i*i)),f=c&&et(t,n)/c;return Math.acos(Math.min(Math.max(f,-1),1))},zero:function(t){return t[0]=0,t[1]=0,t[2]=0,t},str:function(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"},exactEquals:function(t,n){return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]},equals:function(t,n){return v(t[0],n[0])&&v(t[1],n[1])&&v(t[2],n[2])},sub:ot,mul:it,div:ct,dist:ft,sqrDist:st,len:ht,sqrLen:lt,forEach:Mt});function mt(){return new f(4)}function dt(t){var n=new c(4);return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n}function pt(t,n,r,e){var a=new c(4);return a[0]=t,a[1]=n,a[2]=r,a[3]=e,a}function bt(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t}function yt(t,n,r,e,a){return t[0]=n,t[1]=r,t[2]=e,t[3]=a,t}function gt(t,n,r){return t[0]=n[0]+r[0],t[1]=n[1]+r[1],t[2]=n[2]+r[2],t[3]=n[3]+r[3],t}function qt(t,n,r){return t[0]=n[0]-r[0],t[1]=n[1]-r[1],t[2]=n[2]-r[2],t[3]=n[3]-r[3],t}function wt(t,n,r){return t[0]=n[0]*r[0],t[1]=n[1]*r[1],t[2]=n[2]*r[2],t[3]=n[3]*r[3],t}function xt(t,n,r){return t[0]=n[0]/r[0],t[1]=n[1]/r[1],t[2]=n[2]/r[2],t[3]=n[3]/r[3],t}function _t(t,n,r){return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=n[3]*r,t}function At(t,n){return Math.hypot(n[0]-t[0],n[1]-t[1],n[2]-t[2],n[3]-t[3])}function Ot(t,n){return Math.pow(Math.hypot(n[0]-t[0],n[1]-t[1],n[2]-t[2],n[3]-t[3]),2)}function jt(t){return Math.hypot(t[0],t[1],t[2],t[3])}function Pt(t){return Math.pow(Math.hypot(t[0],t[1],t[2],t[3]),2)}function Rt(t,n){var r=n[0],e=n[1],a=n[2],u=n[3],o=Math.max(Math.hypot(r,e,a,u),i);return t[0]=r/o,t[1]=e/o,t[2]=a/o,t[3]=u/o,t}function zt(t,n){return t[0]*n[0]+t[1]*n[1]+t[2]*n[2]+t[3]*n[3]}function Et(t,n,r,e){var a=n[0],u=n[1],o=n[2],i=n[3];return t[0]=a+e*(r[0]-a),t[1]=u+e*(r[1]-u),t[2]=o+e*(r[2]-o),t[3]=i+e*(r[3]-i),t}function Tt(t,n){return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]&&t[3]===n[3]}var St=qt,Dt=wt,It=xt,Lt=At,Vt=Ot,kt=jt,Yt=Pt,Zt=function(){var t=mt();return function(n,r){var e,a,u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0,c=arguments.length>5?arguments[5]:void 0;for(r=r||4,a=o?Math.min(o*r+u,n.length):n.length,e=u;e<a;e+=r)t[0]=n[e],t[1]=n[e+1],t[2]=n[e+2],t[3]=n[e+3],i(t,t,c),n[e]=t[0],n[e+1]=t[1],n[e+2]=t[2],n[e+3]=t[3];return n}}(),Ft=Object.freeze({__proto__:null,create:mt,clone:dt,fromValues:pt,copy:bt,set:yt,add:gt,subtract:qt,multiply:wt,divide:xt,ceil:function(t,n){return t[0]=Math.ceil(n[0]),t[1]=Math.ceil(n[1]),t[2]=Math.ceil(n[2]),t[3]=Math.ceil(n[3]),t},floor:function(t,n){return t[0]=Math.floor(n[0]),t[1]=Math.floor(n[1]),t[2]=Math.floor(n[2]),t[3]=Math.floor(n[3]),t},min:function(t,n,r){return t[0]=Math.min(n[0],r[0]),t[1]=Math.min(n[1],r[1]),t[2]=Math.min(n[2],r[2]),t[3]=Math.min(n[3],r[3]),t},max:function(t,n,r){return t[0]=Math.max(n[0],r[0]),t[1]=Math.max(n[1],r[1]),t[2]=Math.max(n[2],r[2]),t[3]=Math.max(n[3],r[3]),t},round:function(t,n){return t[0]=h(n[0]),t[1]=h(n[1]),t[2]=h(n[2]),t[3]=h(n[3]),t},scale:_t,scaleAndAdd:function(t,n,r,e){return t[0]=n[0]+r[0]*e,t[1]=n[1]+r[1]*e,t[2]=n[2]+r[2]*e,t[3]=n[3]+r[3]*e,t},distance:At,squaredDistance:Ot,length:jt,squaredLength:Pt,negate:function(t,n){return t[0]=-n[0],t[1]=-n[1],t[2]=-n[2],t[3]=-n[3],t},inverse:function(t,n){return t[0]=1/n[0],t[1]=1/n[1],t[2]=1/n[2],t[3]=1/n[3],t},normalize:Rt,dot:zt,cross:function(t,n,r,e){var a=r[0]*e[1]-r[1]*e[0],u=r[0]*e[2]-r[2]*e[0],o=r[0]*e[3]-r[3]*e[0],i=r[1]*e[2]-r[2]*e[1],c=r[1]*e[3]-r[3]*e[1],f=r[2]*e[3]-r[3]*e[2],s=n[0],h=n[1],l=n[2],M=n[3];return t[0]=h*f-l*c+M*i,t[1]=-s*f+l*o-M*u,t[2]=s*c-h*o+M*a,t[3]=-s*i+h*u-l*a,t},lerp:Et,random:function(t,n){var r,e,a,u,o,i,c;n=void 0===n?1:n,o=(r=2*(c=s())-1)*r+(e=(4*s()-2)*Math.sqrt(c*-c+c))*e,i=(a=2*(c=s())-1)*a+(u=(4*s()-2)*Math.sqrt(c*-c+c))*u;var f=Math.sqrt((1-o)/i);return t[0]=n*r,t[1]=n*e,t[2]=n*a*f,t[3]=n*u*f,t},transformMat4:function(t,n,r){var e=n[0],a=n[1],u=n[2],o=n[3];return t[0]=r[0]*e+r[4]*a+r[8]*u+r[12]*o,t[1]=r[1]*e+r[5]*a+r[9]*u+r[13]*o,t[2]=r[2]*e+r[6]*a+r[10]*u+r[14]*o,t[3]=r[3]*e+r[7]*a+r[11]*u+r[15]*o,t},transformQuat:function(t,n,r){var e=r[0],a=r[1],u=r[2],o=r[3],i=n[0],c=n[1],f=n[2],s=a*f-u*c,h=u*i-e*f,l=e*c-a*i;return s+=s,h+=h,l+=l,t[0]=i+o*s+a*l-u*h,t[1]=c+o*h+u*s-e*l,t[2]=f+o*l+e*h-a*s,t[3]=n[3],t},zero:function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t},str:function(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},exactEquals:Tt,equals:function(t,n){return v(t[0],n[0])&&v(t[1],n[1])&&v(t[2],n[2])&&v(t[3],n[3])},sub:St,mul:Dt,div:It,dist:Lt,sqrDist:Vt,len:kt,sqrLen:Yt,forEach:Zt});function Nt(){var t=new c(4);return c!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function Qt(t,n,r){r*=.5;var e=Math.sin(r);return t[0]=e*n[0],t[1]=e*n[1],t[2]=e*n[2],t[3]=Math.cos(r),t}function Xt(t,n,r){var e=n[0],a=n[1],u=n[2],o=n[3],i=r[0],c=r[1],f=r[2],s=r[3];return t[0]=e*s+o*i+a*f-u*c,t[1]=a*s+o*c+u*i-e*f,t[2]=u*s+o*f+e*c-a*i,t[3]=o*s-e*i-a*c-u*f,t}function Bt(t,n,r){r*=.5;var e=n[0],a=n[1],u=n[2],o=n[3],i=Math.sin(r),c=Math.cos(r);return t[0]=e*c+o*i,t[1]=a*c+u*i,t[2]=u*c-a*i,t[3]=o*c-e*i,t}function Ut(t,n,r){r*=.5;var e=n[0],a=n[1],u=n[2],o=n[3],i=Math.sin(r),c=Math.cos(r);return t[0]=e*c-u*i,t[1]=a*c+o*i,t[2]=u*c+e*i,t[3]=o*c-a*i,t}function Ct(t,n,r){r*=.5;var e=n[0],a=n[1],u=n[2],o=n[3],i=Math.sin(r),c=Math.cos(r);return t[0]=e*c+a*i,t[1]=a*c-e*i,t[2]=u*c+o*i,t[3]=o*c-u*i,t}function Gt(t,n){var r=n[0],e=n[1],a=n[2],u=n[3],o=Math.sqrt(r*r+e*e+a*a),i=Math.exp(u),c=o>0?i*Math.sin(o)/o:0;return t[0]=r*c,t[1]=e*c,t[2]=a*c,t[3]=i*Math.cos(o),t}function Wt(t,n){var r=n[0],e=n[1],a=n[2],u=n[3],o=Math.sqrt(r*r+e*e+a*a),i=o>0?Math.atan2(o,u)/o:0;return t[0]=r*i,t[1]=e*i,t[2]=a*i,t[3]=.5*Math.log(r*r+e*e+a*a+u*u),t}function Ht(t,n,r,e){var a,u,o,c,f,s=n[0],h=n[1],l=n[2],M=n[3],v=r[0],m=r[1],d=r[2],p=r[3];return(u=s*v+h*m+l*d+M*p)<0&&(u=-u,v=-v,m=-m,d=-d,p=-p),1-u>i?(a=Math.acos(u),o=Math.sin(a),c=Math.sin((1-e)*a)/o,f=Math.sin(e*a)/o):(c=1-e,f=e),t[0]=c*s+f*v,t[1]=c*h+f*m,t[2]=c*l+f*d,t[3]=c*M+f*p,t}function Jt(t,n){var r,e=n[0]+n[4]+n[8];if(e>0)r=Math.sqrt(e+1),t[3]=.5*r,r=.5/r,t[0]=(n[5]-n[7])*r,t[1]=(n[6]-n[2])*r,t[2]=(n[1]-n[3])*r;else{var a=0;n[4]>n[0]&&(a=1),n[8]>n[3*a+a]&&(a=2);var u=(a+1)%3,o=(a+2)%3;r=Math.sqrt(n[3*a+a]-n[3*u+u]-n[3*o+o]+1),t[a]=.5*r,r=.5/r,t[3]=(n[3*u+o]-n[3*o+u])*r,t[u]=(n[3*u+a]+n[3*a+u])*r,t[o]=(n[3*o+a]+n[3*a+o])*r}return t}var Kt=dt,$t=pt,tn=bt,nn=yt,rn=gt,en=Xt,an=_t,un=zt,on=Et,cn=jt,fn=cn,sn=Pt,hn=sn,ln=Rt,Mn=Tt;var vn,mn,dn,pn,bn,yn,gn=(vn=C(),mn=W(1,0,0),dn=W(0,1,0),function(t,n,r){var e=et(n,r);return e<-.999999?(at(vn,mn,n),ht(vn)<1e-6&&at(vn,dn,n),rt(vn,vn),Qt(t,vn,Math.PI),t):e>.999999?(t[0]=0,t[1]=0,t[2]=0,t[3]=1,t):(at(vn,n,r),t[0]=vn[0],t[1]=vn[1],t[2]=vn[2],t[3]=1+e,ln(t,t))}),qn=(pn=Nt(),bn=Nt(),function(t,n,r,e,a,u){return Ht(pn,n,a,u),Ht(bn,r,e,u),Ht(t,pn,bn,2*u*(1-u)),t}),wn=(yn=j(),function(t,n,r,e){return yn[0]=r[0],yn[3]=r[1],yn[6]=r[2],yn[1]=e[0],yn[4]=e[1],yn[7]=e[2],yn[2]=-n[0],yn[5]=-n[1],yn[8]=-n[2],ln(t,Jt(t,yn))}),xn=Object.freeze({__proto__:null,create:Nt,identity:function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},setAxisAngle:Qt,getAxisAngle:function(t,n){var r=2*Math.acos(n[3]),e=Math.sin(r/2);return e>i?(t[0]=n[0]/e,t[1]=n[1]/e,t[2]=n[2]/e):(t[0]=1,t[1]=0,t[2]=0),r},getAngle:function(t,n){var r=un(t,n);return Math.acos(2*r*r-1)},multiply:Xt,rotateX:Bt,rotateY:Ut,rotateZ:Ct,calculateW:function(t,n){var r=n[0],e=n[1],a=n[2];return t[0]=r,t[1]=e,t[2]=a,t[3]=Math.sqrt(Math.abs(1-r*r-e*e-a*a)),t},exp:Gt,ln:Wt,pow:function(t,n,r){return Wt(t,n),an(t,t,r),Gt(t,t),t},slerp:Ht,random:function(t){var n=s(),r=s(),e=s(),a=Math.sqrt(1-n),u=Math.sqrt(n);return t[0]=a*Math.sin(2*Math.PI*r),t[1]=a*Math.cos(2*Math.PI*r),t[2]=u*Math.sin(2*Math.PI*e),t[3]=u*Math.cos(2*Math.PI*e),t},invert:function(t,n){var r=n[0],e=n[1],a=n[2],u=n[3],o=r*r+e*e+a*a+u*u,i=o?1/o:0;return t[0]=-r*i,t[1]=-e*i,t[2]=-a*i,t[3]=u*i,t},conjugate:function(t,n){return t[0]=-n[0],t[1]=-n[1],t[2]=-n[2],t[3]=n[3],t},fromMat3:Jt,fromEuler:function(t,n,r,e){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"zyx",u=Math.PI/360;n*=u,e*=u,r*=u;var o=Math.sin(n),i=Math.cos(n),c=Math.sin(r),f=Math.cos(r),s=Math.sin(e),h=Math.cos(e);switch(a){case"xyz":t[0]=o*f*h+i*c*s,t[1]=i*c*h-o*f*s,t[2]=i*f*s+o*c*h,t[3]=i*f*h-o*c*s;break;case"xzy":t[0]=o*f*h-i*c*s,t[1]=i*c*h-o*f*s,t[2]=i*f*s+o*c*h,t[3]=i*f*h+o*c*s;break;case"yxz":t[0]=o*f*h+i*c*s,t[1]=i*c*h-o*f*s,t[2]=i*f*s-o*c*h,t[3]=i*f*h+o*c*s;break;case"yzx":t[0]=o*f*h+i*c*s,t[1]=i*c*h+o*f*s,t[2]=i*f*s-o*c*h,t[3]=i*f*h-o*c*s;break;case"zxy":t[0]=o*f*h-i*c*s,t[1]=i*c*h+o*f*s,t[2]=i*f*s+o*c*h,t[3]=i*f*h-o*c*s;break;case"zyx":t[0]=o*f*h-i*c*s,t[1]=i*c*h+o*f*s,t[2]=i*f*s-o*c*h,t[3]=i*f*h+o*c*s;break;default:throw new Error("Unknown angle order "+a)}return t},str:function(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},clone:Kt,fromValues:$t,copy:tn,set:nn,add:rn,mul:en,scale:an,dot:un,lerp:on,length:cn,len:fn,squaredLength:sn,sqrLen:hn,normalize:ln,exactEquals:Mn,equals:function(t,n){return Math.abs(zt(t,n))>=.999999},rotationTo:gn,sqlerp:qn,setAxes:wn});function _n(t,n,r){var e=.5*r[0],a=.5*r[1],u=.5*r[2],o=n[0],i=n[1],c=n[2],f=n[3];return t[0]=o,t[1]=i,t[2]=c,t[3]=f,t[4]=e*f+a*c-u*i,t[5]=a*f+u*o-e*c,t[6]=u*f+e*i-a*o,t[7]=-e*o-a*i-u*c,t}function An(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t}var On=tn;var jn=tn;function Pn(t,n,r){var e=n[0],a=n[1],u=n[2],o=n[3],i=r[4],c=r[5],f=r[6],s=r[7],h=n[4],l=n[5],M=n[6],v=n[7],m=r[0],d=r[1],p=r[2],b=r[3];return t[0]=e*b+o*m+a*p-u*d,t[1]=a*b+o*d+u*m-e*p,t[2]=u*b+o*p+e*d-a*m,t[3]=o*b-e*m-a*d-u*p,t[4]=e*s+o*i+a*f-u*c+h*b+v*m+l*p-M*d,t[5]=a*s+o*c+u*i-e*f+l*b+v*d+M*m-h*p,t[6]=u*s+o*f+e*c-a*i+M*b+v*p+h*d-l*m,t[7]=o*s-e*i-a*c-u*f+v*b-h*m-l*d-M*p,t}var Rn=Pn;var zn=un;var En=cn,Tn=En,Sn=sn,Dn=Sn;var In=Object.freeze({__proto__:null,create:function(){var t=new c(8);return c!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[4]=0,t[5]=0,t[6]=0,t[7]=0),t[3]=1,t},clone:function(t){var n=new c(8);return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4],n[5]=t[5],n[6]=t[6],n[7]=t[7],n},fromValues:function(t,n,r,e,a,u,o,i){var f=new c(8);return f[0]=t,f[1]=n,f[2]=r,f[3]=e,f[4]=a,f[5]=u,f[6]=o,f[7]=i,f},fromRotationTranslationValues:function(t,n,r,e,a,u,o){var i=new c(8);i[0]=t,i[1]=n,i[2]=r,i[3]=e;var f=.5*a,s=.5*u,h=.5*o;return i[4]=f*e+s*r-h*n,i[5]=s*e+h*t-f*r,i[6]=h*e+f*n-s*t,i[7]=-f*t-s*n-h*r,i},fromRotationTranslation:_n,fromTranslation:function(t,n){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=.5*n[0],t[5]=.5*n[1],t[6]=.5*n[2],t[7]=0,t},fromRotation:function(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=0,t[5]=0,t[6]=0,t[7]=0,t},fromMat4:function(t,n){var r=Nt();k(r,n);var e=new c(3);return L(e,n),_n(t,r,e),t},copy:An,identity:function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t[6]=0,t[7]=0,t},set:function(t,n,r,e,a,u,o,i,c){return t[0]=n,t[1]=r,t[2]=e,t[3]=a,t[4]=u,t[5]=o,t[6]=i,t[7]=c,t},getReal:On,getDual:function(t,n){return t[0]=n[4],t[1]=n[5],t[2]=n[6],t[3]=n[7],t},setReal:jn,setDual:function(t,n){return t[4]=n[0],t[5]=n[1],t[6]=n[2],t[7]=n[3],t},getTranslation:function(t,n){var r=n[4],e=n[5],a=n[6],u=n[7],o=-n[0],i=-n[1],c=-n[2],f=n[3];return t[0]=2*(r*f+u*o+e*c-a*i),t[1]=2*(e*f+u*i+a*o-r*c),t[2]=2*(a*f+u*c+r*i-e*o),t},translate:function(t,n,r){var e=n[0],a=n[1],u=n[2],o=n[3],i=.5*r[0],c=.5*r[1],f=.5*r[2],s=n[4],h=n[5],l=n[6],M=n[7];return t[0]=e,t[1]=a,t[2]=u,t[3]=o,t[4]=o*i+a*f-u*c+s,t[5]=o*c+u*i-e*f+h,t[6]=o*f+e*c-a*i+l,t[7]=-e*i-a*c-u*f+M,t},rotateX:function(t,n,r){var e=-n[0],a=-n[1],u=-n[2],o=n[3],i=n[4],c=n[5],f=n[6],s=n[7],h=i*o+s*e+c*u-f*a,l=c*o+s*a+f*e-i*u,M=f*o+s*u+i*a-c*e,v=s*o-i*e-c*a-f*u;return Bt(t,n,r),e=t[0],a=t[1],u=t[2],o=t[3],t[4]=h*o+v*e+l*u-M*a,t[5]=l*o+v*a+M*e-h*u,t[6]=M*o+v*u+h*a-l*e,t[7]=v*o-h*e-l*a-M*u,t},rotateY:function(t,n,r){var e=-n[0],a=-n[1],u=-n[2],o=n[3],i=n[4],c=n[5],f=n[6],s=n[7],h=i*o+s*e+c*u-f*a,l=c*o+s*a+f*e-i*u,M=f*o+s*u+i*a-c*e,v=s*o-i*e-c*a-f*u;return Ut(t,n,r),e=t[0],a=t[1],u=t[2],o=t[3],t[4]=h*o+v*e+l*u-M*a,t[5]=l*o+v*a+M*e-h*u,t[6]=M*o+v*u+h*a-l*e,t[7]=v*o-h*e-l*a-M*u,t},rotateZ:function(t,n,r){var e=-n[0],a=-n[1],u=-n[2],o=n[3],i=n[4],c=n[5],f=n[6],s=n[7],h=i*o+s*e+c*u-f*a,l=c*o+s*a+f*e-i*u,M=f*o+s*u+i*a-c*e,v=s*o-i*e-c*a-f*u;return Ct(t,n,r),e=t[0],a=t[1],u=t[2],o=t[3],t[4]=h*o+v*e+l*u-M*a,t[5]=l*o+v*a+M*e-h*u,t[6]=M*o+v*u+h*a-l*e,t[7]=v*o-h*e-l*a-M*u,t},rotateByQuatAppend:function(t,n,r){var e=r[0],a=r[1],u=r[2],o=r[3],i=n[0],c=n[1],f=n[2],s=n[3];return t[0]=i*o+s*e+c*u-f*a,t[1]=c*o+s*a+f*e-i*u,t[2]=f*o+s*u+i*a-c*e,t[3]=s*o-i*e-c*a-f*u,i=n[4],c=n[5],f=n[6],s=n[7],t[4]=i*o+s*e+c*u-f*a,t[5]=c*o+s*a+f*e-i*u,t[6]=f*o+s*u+i*a-c*e,t[7]=s*o-i*e-c*a-f*u,t},rotateByQuatPrepend:function(t,n,r){var e=n[0],a=n[1],u=n[2],o=n[3],i=r[0],c=r[1],f=r[2],s=r[3];return t[0]=e*s+o*i+a*f-u*c,t[1]=a*s+o*c+u*i-e*f,t[2]=u*s+o*f+e*c-a*i,t[3]=o*s-e*i-a*c-u*f,i=r[4],c=r[5],f=r[6],s=r[7],t[4]=e*s+o*i+a*f-u*c,t[5]=a*s+o*c+u*i-e*f,t[6]=u*s+o*f+e*c-a*i,t[7]=o*s-e*i-a*c-u*f,t},rotateAroundAxis:function(t,n,r,e){if(Math.abs(e)<i)return An(t,n);var a=Math.sqrt(r[0]*r[0]+r[1]*r[1]+r[2]*r[2]);e*=.5;var u=Math.sin(e),o=u*r[0]/a,c=u*r[1]/a,f=u*r[2]/a,s=Math.cos(e),h=n[0],l=n[1],M=n[2],v=n[3];t[0]=h*s+v*o+l*f-M*c,t[1]=l*s+v*c+M*o-h*f,t[2]=M*s+v*f+h*c-l*o,t[3]=v*s-h*o-l*c-M*f;var m=n[4],d=n[5],p=n[6],b=n[7];return t[4]=m*s+b*o+d*f-p*c,t[5]=d*s+b*c+p*o-m*f,t[6]=p*s+b*f+m*c-d*o,t[7]=b*s-m*o-d*c-p*f,t},add:function(t,n,r){return t[0]=n[0]+r[0],t[1]=n[1]+r[1],t[2]=n[2]+r[2],t[3]=n[3]+r[3],t[4]=n[4]+r[4],t[5]=n[5]+r[5],t[6]=n[6]+r[6],t[7]=n[7]+r[7],t},multiply:Pn,mul:Rn,scale:function(t,n,r){return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=n[3]*r,t[4]=n[4]*r,t[5]=n[5]*r,t[6]=n[6]*r,t[7]=n[7]*r,t},dot:zn,lerp:function(t,n,r,e){var a=1-e;return zn(n,r)<0&&(e=-e),t[0]=n[0]*a+r[0]*e,t[1]=n[1]*a+r[1]*e,t[2]=n[2]*a+r[2]*e,t[3]=n[3]*a+r[3]*e,t[4]=n[4]*a+r[4]*e,t[5]=n[5]*a+r[5]*e,t[6]=n[6]*a+r[6]*e,t[7]=n[7]*a+r[7]*e,t},invert:function(t,n){var r=Sn(n);return t[0]=-n[0]/r,t[1]=-n[1]/r,t[2]=-n[2]/r,t[3]=n[3]/r,t[4]=-n[4]/r,t[5]=-n[5]/r,t[6]=-n[6]/r,t[7]=n[7]/r,t},conjugate:function(t,n){return t[0]=-n[0],t[1]=-n[1],t[2]=-n[2],t[3]=n[3],t[4]=-n[4],t[5]=-n[5],t[6]=-n[6],t[7]=n[7],t},length:En,len:Tn,squaredLength:Sn,sqrLen:Dn,normalize:function(t,n){var r=Sn(n);if(r>0){r=Math.sqrt(r);var e=n[0]/r,a=n[1]/r,u=n[2]/r,o=n[3]/r,i=n[4],c=n[5],f=n[6],s=n[7],h=e*i+a*c+u*f+o*s;t[0]=e,t[1]=a,t[2]=u,t[3]=o,t[4]=(i-e*h)/r,t[5]=(c-a*h)/r,t[6]=(f-u*h)/r,t[7]=(s-o*h)/r}return t},str:function(t){return"quat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+")"},exactEquals:function(t,n){return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]&&t[3]===n[3]&&t[4]===n[4]&&t[5]===n[5]&&t[6]===n[6]&&t[7]===n[7]},equals:function(t,n){var r=t[0],e=t[1],a=t[2],u=t[3],o=t[4],c=t[5],f=t[6],s=t[7],h=n[0],l=n[1],M=n[2],v=n[3],m=n[4],d=n[5],p=n[6],b=n[7];return Math.abs(r-h)<=i*Math.max(1,Math.abs(r),Math.abs(h))&&Math.abs(e-l)<=i*Math.max(1,Math.abs(e),Math.abs(l))&&Math.abs(a-M)<=i*Math.max(1,Math.abs(a),Math.abs(M))&&Math.abs(u-v)<=i*Math.max(1,Math.abs(u),Math.abs(v))&&Math.abs(o-m)<=i*Math.max(1,Math.abs(o),Math.abs(m))&&Math.abs(c-d)<=i*Math.max(1,Math.abs(c),Math.abs(d))&&Math.abs(f-p)<=i*Math.max(1,Math.abs(f),Math.abs(p))&&Math.abs(s-b)<=i*Math.max(1,Math.abs(s),Math.abs(b))}});function Ln(){return new f(2)}function Vn(t,n,r){return t[0]=n[0]-r[0],t[1]=n[1]-r[1],t}function kn(t,n,r){return t[0]=n[0]*r[0],t[1]=n[1]*r[1],t}function Yn(t,n,r){return t[0]=n[0]/r[0],t[1]=n[1]/r[1],t}function Zn(t,n){return Math.hypot(n[0]-t[0],n[1]-t[1])}function Fn(t,n){var r=n[0]-t[0],e=n[1]-t[1];return r*r+e*e}function Nn(t){return Math.hypot(t[0],t[1])}function Qn(t){var n=t[0],r=t[1];return n*n+r*r}var Xn=Nn,Bn=Vn,Un=kn,Cn=Yn,Gn=Zn,Wn=Fn,Hn=Qn,Jn=function(){var t=Ln();return function(n,r){var e,a,u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0,c=arguments.length>5?arguments[5]:void 0;for(r=r||2,a=o?Math.min(o*r+u,n.length):n.length,e=u;e<a;e+=r)t[0]=n[e],t[1]=n[e+1],i(t,t,c),n[e]=t[0],n[e+1]=t[1];return n}}(),Kn=Object.freeze({__proto__:null,create:Ln,clone:function(t){var n=new c(2);return n[0]=t[0],n[1]=t[1],n},fromValues:function(t,n){var r=new c(2);return r[0]=t,r[1]=n,r},copy:function(t,n){return t[0]=n[0],t[1]=n[1],t},set:function(t,n,r){return t[0]=n,t[1]=r,t},add:function(t,n,r){return t[0]=n[0]+r[0],t[1]=n[1]+r[1],t},subtract:Vn,multiply:kn,divide:Yn,ceil:function(t,n){return t[0]=Math.ceil(n[0]),t[1]=Math.ceil(n[1]),t},floor:function(t,n){return t[0]=Math.floor(n[0]),t[1]=Math.floor(n[1]),t},min:function(t,n,r){return t[0]=Math.min(n[0],r[0]),t[1]=Math.min(n[1],r[1]),t},max:function(t,n,r){return t[0]=Math.max(n[0],r[0]),t[1]=Math.max(n[1],r[1]),t},round:function(t,n){return t[0]=h(n[0]),t[1]=h(n[1]),t},scale:function(t,n,r){return t[0]=n[0]*r,t[1]=n[1]*r,t},scaleAndAdd:function(t,n,r,e){return t[0]=n[0]+r[0]*e,t[1]=n[1]+r[1]*e,t},distance:Zn,squaredDistance:Fn,length:Nn,squaredLength:Qn,negate:function(t,n){return t[0]=-n[0],t[1]=-n[1],t},inverse:function(t,n){return t[0]=1/n[0],t[1]=1/n[1],t},normalize:function(t,n){var r=Math.max(Math.hypot(n[0],n[1]),i);return t[0]=n[0]/r,t[1]=n[1]/r,t},dot:function(t,n){return t[0]*n[0]+t[1]*n[1]},cross:function(t,n,r){var e=n[0]*r[1]-n[1]*r[0];return t[0]=t[1]=0,t[2]=e,t},lerp:function(t,n,r,e){var a=n[0],u=n[1];return t[0]=a+e*(r[0]-a),t[1]=u+e*(r[1]-u),t},random:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=2*s()*Math.PI;return t[0]=Math.cos(r)*n,t[1]=Math.sin(r)*n,t},transformMat2:function(t,n,r){var e=n[0],a=n[1];return t[0]=r[0]*e+r[2]*a,t[1]=r[1]*e+r[3]*a,t},transformMat2d:function(t,n,r){var e=n[0],a=n[1];return t[0]=r[0]*e+r[2]*a+r[4],t[1]=r[1]*e+r[3]*a+r[5],t},transformMat3:function(t,n,r){var e=n[0],a=n[1];return t[0]=r[0]*e+r[3]*a+r[6],t[1]=r[1]*e+r[4]*a+r[7],t},transformMat4:function(t,n,r){var e=n[0],a=n[1];return t[0]=r[0]*e+r[4]*a+r[12],t[1]=r[1]*e+r[5]*a+r[13],t},rotate:function(t,n,r,e){var a=n[0]-r[0],u=n[1]-r[1],o=Math.sin(e),i=Math.cos(e);return t[0]=a*i-u*o+r[0],t[1]=a*o+u*i+r[1],t},angle:function(t,n){var r=t[0],e=t[1],a=n[0],u=n[1];return Math.abs(Math.atan2(e*a-r*u,r*a+e*u))},signedAngle:function(t,n){var r=t[0],e=t[1],a=n[0],u=n[1];return Math.atan2(r*u-e*a,r*a+e*u)},zero:function(t){return t[0]=0,t[1]=0,t},str:function(t){return"vec2("+t[0]+", "+t[1]+")"},exactEquals:function(t,n){return t[0]===n[0]&&t[1]===n[1]},equals:function(t,n){return v(t[0],n[0])&&v(t[1],n[1])},len:Xn,sub:Bn,mul:Un,div:Cn,dist:Gn,sqrDist:Wn,sqrLen:Hn,forEach:Jn});t.glMatrix=d,t.mat2=q,t.mat2d=O,t.mat3=T,t.mat4=U,t.quat=xn,t.quat2=In,t.vec2=Kn,t.vec3=vt,t.vec4=Ft,Object.defineProperty(t,"__esModule",{value:!0})}));
